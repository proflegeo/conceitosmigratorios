<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Protocolo M.I.G.R.A.√á.√É.O.</title>
    <style>
        :root { --bg: #050505; --cyan: #00f3ff; --green: #0aff0a; --red: #ff003c; --purple: #bd00ff; }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background: var(--bg); 
            color: #eee; 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; 
            /* O segredo para o iPhone: dvh ajusta a altura dinamicamente */
            height: 100dvh; 
            display: flex; 
            justify-content: center; 
            overflow: hidden; 
        }

        #game { 
            width: 100%; 
            max-width: 600px; 
            height: 100%; 
            padding: 15px; 
            display: flex; 
            flex-direction: column; 
            gap: 15px; 
        }

        /* Topo: Vidas e Bot√£o Reiniciar */
        .hud { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid #333; 
            padding-bottom: 10px; 
            min-height: 40px;
        }

        .btn-restart {
            background: none;
            border: 1px solid #333;
            color: #888;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            text-transform: uppercase;
        }

        /* Tela preta (Flex√≠vel para ocupar o espa√ßo que sobra) */
        .screen { 
            background: #000; 
            border-left: 4px solid var(--purple); 
            padding: 20px; 
            flex-grow: 1; /* Ocupa todo o espa√ßo livre no meio */
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center;
            text-align: center; 
            border-radius: 8px; 
            overflow-y: auto; /* Se o texto for gigante, rola s√≥ aqui dentro */
        }

        .def { font-size: 1.3rem; line-height: 1.4; font-weight: 500; }
        
        .hint { 
            color: #f8e71c; 
            margin-top: 15px; 
            font-size: 1rem; 
            border-top: 1px dashed #333; 
            padding-top: 10px; 
            display: none; 
            width: 100%;
        }
        .show { display: block; animation: fadeIn 0.5s; }

        /* √Årea de input fixa no fundo */
        .controls {
            display: flex; 
            flex-direction: column; 
            gap: 10px; 
            padding-bottom: env(safe-area-inset-bottom); /* Prote√ß√£o para iPhones novos */
        }

        input { 
            background: #1a1a1a; 
            border: 2px solid #333; 
            color: #fff; 
            padding: 15px; 
            width: 100%; 
            font-size: 16px; /* 16px evita zoom autom√°tico no iPhone */
            border-radius: 8px; 
            text-transform: uppercase; 
            outline: none;
        }
        input:focus { border-color: var(--cyan); }

        .btns { display: flex; gap: 10px; }
        
        button.action { 
            padding: 15px; 
            flex: 1; 
            border: none; 
            border-radius: 8px; 
            font-weight: bold; 
            font-size: 1rem;
            cursor: pointer; 
        }
        
        .btn-ok { background: var(--cyan); color: #000; flex: 2; }
        .btn-hint { background: #333; color: #ff0; flex: 1; }

        .msg { text-align: center; height: 20px; font-weight: bold; font-size: 0.9rem; margin-top: -5px;}

        /* Telas de In√≠cio/Fim */
        .overlay { 
            position: fixed; inset: 0; 
            background: rgba(0,0,0,0.98); 
            display: flex; flex-direction: column; 
            align-items: center; justify-content: center; 
            z-index: 50; text-align: center; 
            padding: 20px;
        }
        .hidden { display: none !important; }
        
        .btn-start { 
            background: var(--green); color: #000; 
            padding: 18px 50px; font-size: 1.2rem; 
            border-radius: 50px; margin-top: 30px; 
            border: none; font-weight: bold; cursor: pointer;
            box-shadow: 0 0 20px rgba(10, 255, 10, 0.3);
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="game">
        <div class="hud">
            <span id="lives" style="font-size: 1.1rem">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span> 
            <button class="btn-restart" onclick="init()">‚Üª Reiniciar</button>
            <span id="hints" style="font-size: 0.9rem">üí° x3</span>
        </div>

        <div class="screen">
            <div class="def" id="q">Carregando...</div>
            <div class="hint" id="h"></div>
        </div>

        <div class="msg" id="msg"></div>

        <div class="controls">
            <input type="text" id="ans" placeholder="DIGITE SUA RESPOSTA..." autocomplete="off">
            <div class="btns">
                <button class="action btn-ok" onclick="check()">ENVIAR</button>
                <button class="action btn-hint" onclick="tip()">DICA</button>
            </div>
        </div>
    </div>

    <div id="start" class="overlay">
        <h1 style="color:var(--cyan); font-size: 2.5rem; margin-bottom: 10px;">M.I.G.R.A.√á.√É.O.</h1>
        <p style="color: #aaa; max-width: 400px; line-height: 1.5;">Sistema de navega√ß√£o comprometido.<br>Responda para restaurar os dados.</p>
        <button class="btn-start" onclick="init()">INICIAR MISS√ÉO</button>
    </div>
    <script>
        const database = [
            { t: "Migra√ß√£o", d: "Termo geral para qualquer deslocamento de pessoas pelo espa√ßo geogr√°fico.", h: "Pesquise: 'Defini√ß√£o geral de deslocamento populacional'." },
            { t: "Migra√ß√£o interna", d: "Deslocamento de pessoas dentro das fronteiras de um mesmo pa√≠s.", h: "Pesquise: 'Tipos de migra√ß√£o dentro do territ√≥rio nacional'." },
            { t: "Migra√ß√£o internacional", d: "Deslocamento de pessoas entre pa√≠ses diferentes.", h: "Pesquise: 'Conceito de migra√ß√£o externa ou entre na√ß√µes'." },
            { t: "Emigra√ß√£o", d: "Ato de SAIR do seu local de origem para viver em outro lugar.", h: "Pesquise: 'Diferen√ßa entre Emigrar e Imigrar (Sa√≠da)'." },
            { t: "Imigra√ß√£o", d: "Ato de CHEGAR e entrar em um novo local para viver.", h: "Pesquise: 'Diferen√ßa entre Emigrar e Imigrar (Chegada)'." },
            { t: "Migra√ß√£o intermunicipal", d: "Mudan√ßa de resid√™ncia de uma cidade para outra.", h: "Pesquise: 'Mudan√ßa de endere√ßo entre munic√≠pios vizinhos'." },
            { t: "Migra√ß√£o intramunicipal", d: "Mudan√ßa de resid√™ncia dentro da mesma cidade (bairros).", h: "Pesquise: 'Deslocamento residencial dentro do mesmo munic√≠pio'." },
            { t: "Migra√ß√£o interestadual", d: "Mudan√ßa de resid√™ncia de um estado para outro.", h: "Pesquise: 'Migra√ß√£o da Bahia para S√£o Paulo (exemplo)'." },
            { t: "Migra√ß√£o intraestadual", d: "Mudan√ßa de cidade dentro do mesmo estado.", h: "Pesquise: 'Migra√ß√£o de Campinas para Santos (dentro de SP)'." },
            { t: "Migra√ß√£o inter-regional", d: "Deslocamento de uma macrorregi√£o do pa√≠s para outra.", h: "Pesquise: 'Fluxo migrat√≥rio do Nordeste para o Sudeste'." },
            { t: "Migra√ß√£o intrarregional", d: "Deslocamento entre locais na mesma macrorregi√£o.", h: "Pesquise: 'Migra√ß√£o entre estados do pr√≥prio Nordeste'." },
            { t: "Migra√ß√£o pendular", d: "Movimento di√°rio de vai e vem (casa-trabalho).", h: "Pesquise: 'Deslocamento di√°rio de trabalhadores em metr√≥poles'.", a: ["Movimento pendular"] },
            { t: "Migra√ß√£o definitiva", d: "Mudan√ßa sem inten√ß√£o de voltar, moradia fixa.", h: "Pesquise: 'Mudan√ßa permanente de resid√™ncia'." },
            { t: "Migra√ß√£o tempor√°ria", d: "Deslocamento por tempo limitado com inten√ß√£o de retorno.", h: "Pesquise: 'Interc√¢mbio ou trabalho tempor√°rio no exterior'." },
            { t: "Migra√ß√£o sazonal", d: "Deslocamento ligado a esta√ß√µes do ano ou colheitas.", h: "Pesquise: 'Trabalhadores rurais tempor√°rios (b√≥ias-frias)'.", a: ["Sazonal"] },
            { t: "Transum√¢ncia", d: "Outro nome para migra√ß√£o sazonal (comum na pecu√°ria).", h: "Pesquise: 'Deslocamento de gado no Sert√£o ou nos Alpes'." },
            { t: "Cidade dormit√≥rio", d: "Cidade onde a popula√ß√£o dorme mas trabalha na cidade vizinha.", h: "Pesquise: 'Cidades sat√©lites que servem apenas para resid√™ncia'." },
            { t: "Migra√ß√£o de c√©rebros", d: "Sa√≠da de profissionais altamente qualificados para pa√≠ses ricos.", h: "Pesquise: 'Fuga de pesquisadores e cientistas do Brasil'.", a: ["Fuga de cerebros"] },
            { t: "Migra√ß√£o espont√¢nea", d: "Movimento por vontade pr√≥pria e planejamento.", h: "Pesquise: 'Migrar por desejo de melhoria de vida (volunt√°rio)'." },
            { t: "Migra√ß√£o for√ßada", d: "Deslocamento involunt√°rio por guerras ou desastres.", h: "Pesquise: 'Pessoas obrigadas a sair de casa (ref√∫gio)'." },
            { t: "Migra√ß√£o de retorno", d: "A volta do migrante para sua terra natal.", h: "Pesquise: 'Nordestinos voltando do Sudeste para o Nordeste'." },
            { t: "√äxodo Rural", d: "Migra√ß√£o em massa do campo para a cidade.", h: "Pesquise: 'Processo de urbaniza√ß√£o do Brasil na d√©cada de 1970'." },
            { t: "Di√°spora", d: "Dispers√£o de um povo pelo mundo mantendo identidade cultural.", h: "Pesquise: 'Dispers√£o dos judeus ou africanos pelo mundo'." },
            { t: "Cosmopolita", d: "Pessoa ou cidade que agrega diversas culturas, 'Cidad√£o do Mundo'.", h: "Pesquise: 'Cidades globais multiculturais como NY ou Londres'." },
            { t: "Imigrante econ√¥mico", d: "Pessoa que migra voluntariamente por emprego/dinheiro.", h: "Pesquise: 'Migra√ß√£o motivada por busca de trabalho'." },
            { t: "Refugiado", d: "Pessoa que fugiu por persegui√ß√£o ou guerra, com prote√ß√£o legal.", h: "Pesquise: 'Defini√ß√£o da ACNUR/ONU para quem foge de guerras'." },
            { t: "Refugiado clim√°tico", d: "Pessoa for√ßada a migrar por desastres ambientais.", h: "Pesquise: 'Migrantes afetados por secas extremas ou inunda√ß√µes'." },
            { t: "Ap√°trida", d: "Pessoa sem nacionalidade reconhecida por nenhum pa√≠s.", h: "Pesquise: 'Pessoas que n√£o possuem p√°tria ou documentos'." },
            { t: "Asilo", d: "Prote√ß√£o jur√≠dica pedida a outro governo por persegui√ß√£o pol√≠tica.", h: "Pesquise: 'O que Snowden ou Assange pediram a outros pa√≠ses'." },
            { t: "Exilado", d: "Pessoa expulsa de seu pa√≠s, impedida de retornar.", h: "Pesquise: 'Brasileiros expulsos durante a Ditadura Militar'." },
            { t: "Deslocados internos", d: "Fugitivos de conflitos que n√£o cruzaram fronteiras internacionais.", h: "Pesquise: 'Diferen√ßa entre refugiado e deslocado interno'." },
            { t: "N√¥made digital", d: "Profissional que usa internet para trabalhar de qualquer lugar.", h: "Pesquise: 'Trabalhar viajando o mundo com laptop'." },
            { t: "Expatriado", d: "Profissional enviado pela empresa para trabalhar no exterior.", h: "Pesquise: 'Executivos transferidos para filiais internacionais'." },
            { t: "Fronteiri√ßo", d: "Pessoa que vive na divisa e cruza a fronteira frequentemente.", h: "Pesquise: 'Vida em cidades g√™meas (ex: Ponta Por√£/Pedro Juan)'." },
            { t: "Extradi√ß√£o", d: "Entrega de um criminoso por um pa√≠s √† justi√ßa de outro.", h: "Pesquise: 'Pa√≠s devolvendo fugitivo para ser julgado na origem'." },
            { t: "Imigrante ilegal", d: "Pessoa em pa√≠s estrangeiro sem documenta√ß√£o oficial.", h: "Pesquise: 'Migra√ß√£o indocumentada ou irregular'.", a: ["Ilegal", "Indocumentado", "Clandestino"] },
            { t: "Deportar", d: "Ato do Estado de enviar for√ßadamente estrangeiro de volta.", h: "Pesquise: 'O que acontece com imigrantes ilegais detidos'.", a: ["Deportacao"] },
            { t: "Coyote", d: "Atravessador pago para guiar imigrantes ilegais.", h: "Pesquise: 'Atravessadores na fronteira M√©xico-EUA'.", a: ["Coiote"] },
            { t: "Tr√°fico de pessoas", d: "Recrutamento enganoso/for√ßado de pessoas para explora√ß√£o.", h: "Pesquise: 'Explora√ß√£o sexual ou trabalho escravo de migrantes'.", a: ["Trafico humano"] },
            { t: "Naturaliza√ß√£o", d: "Processo jur√≠dico para adquirir nacionalidade de outro pa√≠s.", h: "Pesquise: 'Como um estrangeiro vira cidad√£o brasileiro'." },
            { t: "Visto", d: "Autoriza√ß√£o no passaporte para entrar em um pa√≠s.", h: "Pesquise: 'Documento consular para entrada nos EUA'." },
            { t: "Dupla cidadania", d: "Ter nacionalidade de dois pa√≠ses ao mesmo tempo.", h: "Pesquise: 'Ter passaporte brasileiro e italiano simultaneamente'." },
            { t: "Saldo migrat√≥rio", d: "Diferen√ßa matem√°tica entre n√∫mero de imigrantes e emigrantes.", h: "Pesquise: 'C√°lculo demogr√°fico: Entradas menos Sa√≠das'." },
            { t: "Censo demogr√°fico", d: "Pesquisa oficial do governo para contar a popula√ß√£o.", h: "Pesquise: 'Pesquisa do IBGE realizada a cada 10 anos'.", a: ["Censo", "Recenseamento"] },
            { t: "Fatores de repuls√£o", d: "Motivos negativos que empurram a pessoa para fora (ex: guerra).", h: "Pesquise: 'Motivos que causam a sa√≠da for√ßada de um pa√≠s'.", a: ["Fatores repulsivos", "Repulsao"] },
            { t: "Fatores de atra√ß√£o", d: "Motivos positivos que puxam o migrante (ex: emprego).", h: "Pesquise: 'O que atrai imigrantes para pa√≠ses desenvolvidos'.", a: ["Fatores atrativos", "Atracao"] },
            { t: "Remessas financeiras", d: "Dinheiro enviado por trabalhadores no exterior para a fam√≠lia.", h: "Pesquise: 'Envio de d√≥lares de imigrantes para o pa√≠s de origem'." },
            { t: "Xenofobia", d: "Avers√£o, √≥dio ou preconceito contra estrangeiros.", h: "Pesquise: 'Not√≠cias sobre preconceito contra imigrantes na Europa'." },
            { t: "Gentrifica√ß√£o", d: "Valoriza√ß√£o imobili√°ria que expulsa moradores pobres de um bairro.", h: "Pesquise: 'Enobrecimento urbano e expuls√£o de moradores antigos'." },
            { t: "Enclave √©tnico", d: "√Årea na cidade concentrada por grupo de mesma nacionalidade.", h: "Pesquise: 'Bairro da Liberdade (SP) ou Little Italy (NY)'.", a: ["Gueto", "Bairro etnico"] },
            { t: "Assimila√ß√£o cultural", d: "Quando o imigrante adota costumes locais e perde os originais.", h: "Pesquise: 'Perda de identidade cultural do imigrante'." },
            { t: "Multiculturalismo", d: "Coexist√™ncia de diversas culturas no mesmo territ√≥rio.", h: "Pesquise: 'Sociedades onde v√°rias culturas convivem em harmonia'." },
            { t: "Segrega√ß√£o espacial", d: "Separa√ß√£o f√≠sica de grupos sociais (ricos x pobres) na cidade.", h: "Pesquise: 'Faveliza√ß√£o e condom√≠nios fechados'.", a: ["Segregacao socioespacial"] }
        ];

        let st = { q: [], c: null, l: 5, h: 3, s: 0 };

        function init() {
            // Embaralhamento aleat√≥rio robusto
            st.q = [...db].sort(() => Math.random() - 0.5); 
            st.l = 5; 
            st.h = 3; 
            st.s = 0;
            
            document.getElementById('start').classList.add('hidden');
            document.getElementById('lives').innerHTML = "‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è";
            document.getElementById('hints').innerText = "üí° x3";
            next();
        }

        function next() {
            if (!st.q.length || st.l <= 0) return end();
            
            st.c = st.q.pop();
            
            // Efeitos visuais de transi√ß√£o
            const qEl = document.getElementById('q');
            qEl.style.opacity = 0;
            setTimeout(() => {
                qEl.innerText = st.c.d;
                qEl.style.opacity = 1;
            }, 200);

            document.getElementById('h').classList.remove('show');
            document.getElementById('ans').value = '';
            document.getElementById('msg').innerText = '';
            document.getElementById('ans').focus();
        }

        function check() {
            // Normaliza a resposta do usu√°rio
            let v = document.getElementById('ans').value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim();
            // Normaliza a resposta oficial
            let r = st.c.t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim();
            
            // Verifica se existe lista de respostas alternativas (a) e normaliza elas
            let alt = st.c.a ? st.c.a.map(x => x.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim()) : [];

            const msgEl = document.getElementById('msg');

            // Verifica se bate com a oficial OU com alguma alternativa
            if (v === r || alt.includes(v)) {
                st.s++; 
                msgEl.innerText = "‚úÖ CERTO!";
                msgEl.style.color = "#0aff0a";
                // Pequeno delay para ler a mensagem antes de trocar
                setTimeout(next, 1000);
            } else {
                st.l--; 
                msgEl.innerText = "‚ùå ERA: " + st.c.t.toUpperCase();
                msgEl.style.color = "#ff003c";
                document.getElementById('lives').innerText = "‚ù§Ô∏è".repeat(st.l);
                
                // Devolve a pergunta para o final da fila (para tentar de novo depois)
                st.q.unshift(st.c); 
                setTimeout(next, 2500);
            }
        }

        function tip() {
            if (st.h > 0) {
                st.h--;
                document.getElementById('h').innerText = "üí° " + st.c.h;
                document.getElementById('h').classList.add('show');
                document.getElementById('hints').innerText = "üí° x" + st.h;
            }
        }

        function end() {
            const win = st.l > 0;
            const tela = document.getElementById('start');
            tela.classList.remove('hidden');
            tela.innerHTML = `
                <h1 style="color: ${win ? 'var(--green)' : 'var(--red)'}; font-size: 2.5rem; margin-bottom: 10px;">
                    ${win ? 'MISS√ÉO CUMPRIDA' : 'FALHA NO SISTEMA'}
                </h1>
                <p style="font-size: 1.2rem; margin-bottom: 20px;">Acertos: ${st.s}</p>
                <button class="btn-start" onclick="init()">REINICIAR</button>
            `;
        }

        // Permitir enviar com Enter
        document.getElementById('ans').addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                check();
            }
        });
    </script>
</body>
</html>
